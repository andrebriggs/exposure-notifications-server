
# File: azure-pipelines.yml
trigger:
- master

variables:
  - group: quick-start-vg
  - name: SERVICE
    value: cleanup-export

stages:
  - stage: docker-$(SERVICE)
    dependsOn: build_test
    jobs:
    - job: build-push-$(SERVICE)
      pool:
        vmImage: 'Ubuntu 16.04'
      steps:
      - script: echo $(SERVICE)!
      - script: |
        # Login to Azure 
        echo "az login --service-principal --username $(SP_APP_ID) --password $(SP_PASS) --tenant $(SP_TENANT)"
        az login --service-principal --username "$(SP_APP_ID)" --password "$(SP_PASS)" --tenant "$(SP_TENANT)"
      displayName: 'Azure Login'